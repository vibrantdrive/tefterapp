function loadUserTable(c,e,a){$("#loader").show();$("#data").children("p").remove();if(a){$("#data").addClass("hide");$("#pagination").addClass("hide");$("ol").addClass("hide")}var d=$("#base_url").val();var b=$("#call_script_table").val();if(a){$("ol").children("li").remove();$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val())}$.ajax({type:"POST",url:d+b,dataType:"json",data:"limit_from="+$("#limit_from").attr("value")+"&limit_to="+$("#limit_to").attr("value")+"&letterFilter="+c+"&roleFilter="+e,failure:function(f){$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");$("ol").removeClass("hide");if(c==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+c).removeClass("clicked")}$("#show-more").removeClass("clicked")},success:function(h){if(h.success){if(h.code==200){var j=parseInt(h.limit_from);var n=parseInt(h.total);var l=parseInt(h.totalUsers);var k=parseInt(h.limit_from);var g=parseInt(h.limit_to);$("#range_items").html(parseInt(k+n));$("#range_total").html(parseInt(l));if(g>=l){$("#show-more").hide()}else{$("#show-more").show()}if(parseInt(h.total)!=0){$("ol").append(h.data);var m=parseInt($("#limit_from").attr("value"));var f=parseInt($("#limit_to").attr("value"));var i=parseInt($("#limit_default_to").attr("value"));$("#limit_to").attr("value",parseInt(f+i));$("#limit_from").attr("value",parseInt(m+i));$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");$("ol").removeClass("hide");if(c==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+c).removeClass("clicked")}$("#show-more").removeClass("clicked")}else{$("#loader").hide();$("#data").append(h.data);$("#data").removeClass("hide");$("#pagination").addClass("hide");$("ol").addClass("hide");if(c==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+c).removeClass("clicked")}$("#show-more").removeClass("clicked")}}}else{$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");$("ol").removeClass("hide");if(c==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+c).removeClass("clicked")}$("#show-more").removeClass("clicked");if(h.code==-200){window.location=d+"login"}}}})}function loadClientTable(d,b,a){$("#loader").show();$("#data").children("p").remove();if(a){$("#data").addClass("hide");$("#pagination").addClass("hide");$("ol").addClass("hide")}var e=$("#base_url").val();var c=$("#call_script_table").val();if(a){$("ol").children("li").remove();$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val())}$.ajax({type:"POST",url:e+c,dataType:"json",data:"limit_from="+$("#limit_from").attr("value")+"&limit_to="+$("#limit_to").attr("value")+"&letterFilter="+d+"&keyword="+b,failure:function(f){$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");$("ol").removeClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked")},success:function(h){if(h.success){if(h.code==200){var k=parseInt(h.limit_from);var n=parseInt(h.total);var i=parseInt(h.totalClients);var l=parseInt(h.limit_from);var g=parseInt(h.limit_to);$("#range_items").html(parseInt(l+n));$("#range_total").html(parseInt(i));if(g>=i){$("#show-more").hide()}else{$("#show-more").show()}if(parseInt(h.total)!=0){$("ol").append(h.data);var m=parseInt($("#limit_from").attr("value"));var f=parseInt($("#limit_to").attr("value"));var j=parseInt($("#limit_default_to").attr("value"));$("#limit_to").attr("value",parseInt(f+j));$("#limit_from").attr("value",parseInt(m+j));$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");$("ol").removeClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked")}else{$("#loader").hide();$("#data").append(h.data);$("#data").removeClass("hide");$("#pagination").addClass("hide");$("ol").addClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked")}}}else{$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");$("ol").removeClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked");if(h.code==-200){window.location=e+"login"}}}})}function loadTable(b,i,g,c,e,a){$("#loader").show();if(e){$("#data").addClass("hide");$("#pagination").addClass("hide")}var j=$("#base_url").val();var d=$("#call_script_table").val();var f=$("#for_group").val();var h=$("#for_group_id").val();if(e){$("tbody").children("tr").remove();$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val())}$.ajax({type:"POST",url:j+d,dataType:"json",data:"limit_from="+$("#limit_from").attr("value")+"&limit_to="+$("#limit_to").attr("value")+"&letterFilter="+b+"&keyword="+i+"&typeFilter="+g+"&clientFilter="+c+"&forGroup="+f+"&forGroupID="+h+"&withClient="+a,failure:function(k){$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");if(b==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+b).removeClass("clicked")}$("#show-more").removeClass("clicked")},success:function(m){if(m.success){if(m.code==200){$("tbody").append(m.data);var o=parseInt(m.limit_from);var s=parseInt(m.total);var r=parseInt(m.totalAccounts);var p=parseInt(m.limit_from);var l=parseInt(m.limit_to);$("#range_items").html(parseInt(p+s));$("#range_total").html(parseInt(r));$("#details_count").html(parseInt(r));if(l>=r){$("#show-more").hide()}else{$("#show-more").show()}if(parseInt(m.total)!=0){var q=parseInt($("#limit_from").attr("value"));var k=parseInt($("#limit_to").attr("value"));var n=parseInt($("#limit_default_to").attr("value"));$("#limit_to").attr("value",parseInt(k+n));$("#limit_from").attr("value",parseInt(q+n))}$(".send-selector").click(function(){$("#message_second").hide();var u=this.id.indexOf("-");var t=this.id.substring(u+1);$("#send_id").attr("value",parseInt(t));$.blockUI({message:$("#send-via-email")});$("#send-via-email .cancel").click(function(){$.unblockUI({onUnblock:function(){$("#email").attr("value","");$(".success").hide();$(".problem").hide()}});return false});return false})}$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");if(b==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+b).removeClass("clicked")}$("#show-more").removeClass("clicked")}else{$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");if(b==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+b).removeClass("clicked")}$("#show-more").removeClass("clicked");if(m.code==-200){window.location=j+"login"}}}})}function loadGroupTable(d,b,a){$("#loader").show();if(a){$("#data").addClass("hide");$("#pagination").addClass("hide")}var e=$("#base_url").val();var c=$("#call_script_table").val();if(a){$("tbody").children("tr").remove();$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val())}$.ajax({type:"POST",url:e+c,dataType:"json",data:"limit_from="+$("#limit_from").attr("value")+"&limit_to="+$("#limit_to").attr("value")+"&letterFilter="+d+"&keyword="+b,failure:function(f){$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked")},success:function(h){if(h.success){if(h.code==200){$("tbody").append(h.data);var j=parseInt(h.limit_from);var m=parseInt(h.total);var n=parseInt(h.totalGroups);var k=parseInt(h.limit_from);var g=parseInt(h.limit_to);$("#range_items").html(parseInt(k+m));$("#range_total").html(parseInt(n));$("#details_count").html(parseInt(n));if(g>=n){$("#show-more").hide()}else{$("#show-more").show()}if(parseInt(h.total)!=0){var l=parseInt($("#limit_from").attr("value"));var f=parseInt($("#limit_to").attr("value"));var i=parseInt($("#limit_default_to").attr("value"));$("#limit_to").attr("value",parseInt(f+i));$("#limit_from").attr("value",parseInt(l+i))}}$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked")}else{$("#loader").hide();$("#data").removeClass("hide");$("#pagination").removeClass("hide");if(d==""){$("#letter_all").removeClass("clicked")}else{$("#letter_"+d).removeClass("clicked")}$("#show-more").removeClass("clicked");if(h.code==-200){window.location=e+"login"}}}})}function searchClick(b){var e=$("#types").val();var c=$("#clients").val();var h=$("#tools");var d=h.children("ul");var a=d.children("li.selected").get(0);var g=a.id.indexOf("_");var f=a.id.substring(g+1);if(f=="all"){f=""}$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val());loadTable(f,b,e,c,true,"yes")}function searchClientClick(b){var f=$("#tools");var c=f.children("ul");var a=c.children("li.selected").get(0);var e=a.id.indexOf("_");var d=a.id.substring(e+1);if(d=="all"){d=""}$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val());loadClientTable(d,b,true)}function searchGroupClick(b){var f=$("#tools");var c=f.children("ul");var a=c.children("li.selected").get(0);var e=a.id.indexOf("_");var d=a.id.substring(e+1);if(d=="all"){d=""}$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val());loadGroupTable(d,b,true)}function typeOnChange(){var e=$("#types").val();var c=$("#clients").val();var b=$("#search").val();var h=$("#tools");var d=h.children("ul");var a=d.children("li.selected").get(0);var g=a.id.indexOf("_");var f=a.id.substring(g+1);if(f=="all"){f=""}$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val());loadTable(f,b,e,c,true,"yes")}function clientOnChange(){var e=$("#types").val();var c=$("#clients").val();var b=$("#search").val();var h=$("#tools");var d=h.children("ul");var a=d.children("li.selected").get(0);var g=a.id.indexOf("_");var f=a.id.substring(g+1);if(f=="all"){f=""}$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val());loadTable(f,b,e,c,true,"yes")}function roleOnChange(){var f=$("#roles").val();var e=$("#tools");var b=e.children("ul");var a=b.children("li.selected").get(0);var d=a.id.indexOf("_");var c=a.id.substring(d+1);if(c=="all"){c=""}$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val());loadUserTable(c,f,true)}function showMore(){var g=$("#show-more").hasClass("clicked");if(!g){$("#show-more").addClass("clicked");var f=$("#types").val();var c=$("#clients").val();var i=$("#search").val();var d=$("#roles").val();var a=$("#tools");var e=a.children("ul");var j=e.children("li.selected").get(0);var h=j.id.indexOf("_");var b=j.id.substring(h+1);if(b=="all"){b=""}switch($("#call_script_table").val()){case"accounts/table":loadTable(b,i,f,c,false,"yes");break;case"clients/table":loadClientTable(b,i,false);break;case"users/table":loadUserTable(b,d,false);break;case"groups/table":loadGroupTable(b,i,false);break}}}function newClientClick(a){var c=$("#base_url_new_client").val();var b=$("#call_script_new_client").val();$(".problem").hide();$.ajax({type:"POST",url:c+b,dataType:"json",data:"company_name="+a,failure:function(d){$('button[type="submit"]').removeAttr("disabled")},success:function(d){if(d.success){if(d.code==200){$("#client").append($("<option></option>").attr("value",parseInt(d.data)).text(a));$('button[type="submit"]').removeAttr("disabled");$("#new_client").attr("value","");$.unblockUI();$("#client option[value='"+parseInt(d.data)+"']").attr("selected","selected");return false}}else{if(d.code==-200){window.location=c+"login"}if(d.code==-100){$(".problem").show();$(".problem").children("p").remove();$(".problem").append("<p>"+d.description+"</p>");$('button[type="submit"]').removeAttr("disabled")}}}})}function newUserClientClick(a){var c=$("#base_url_new_client").val();var b=$("#call_script_new_client").val();$("#messageproblem").hide();$.ajax({type:"POST",url:c+b,dataType:"json",data:"company_name="+a,failure:function(d){$('button[type="submit"]').removeAttr("disabled")},success:function(f){if(f.success){if(f.code==200){var e=document.getElementById("select_all");var d="";if(!e){d=d+'<label for="select_all" class="inline-label"><input type="checkbox" name="select_all" id="select_all" value="all" /> All</label>'}d=d+'<label for="client_id'+f.data+'" class="inline-label"><input type="checkbox" name="client_id'+f.data+'" id="client_id'+f.data+'" value="'+f.data+'" class="selector" /> '+a+"</label>";$("#checkboxes").append(d);$("input[id=client_id"+f.data+"]").attr("checked",true);$('button[type="submit"]').removeAttr("disabled");$.unblockUI({onUnblock:function(){$("#new_client").attr("value","");$(".success").hide();$("#messageproblem").hide()}});$("#select_all").click(function(){var g=this.checked;$("input[class=selector]").each(function(){this.checked=g})});return false}}else{if(f.code==-200){window.location=c+"login"}if(f.code==-100){$("#messageproblem").show();$("#messageproblem").children("p").remove();$("#messageproblem").append("<p>"+f.description+"</p>");$('button[type="submit"]').removeAttr("disabled")}}}})}function hideBlockUI(){$.unblockUI({onUnblock:function(){$("#email").attr("value","");$("#sendmessagesuccess").remove();$("#sendmessageproblem").hide()}});return false}function sendAccount(b){var d=$("#base_url_send").val();var a=$("#call_script_send").val();var c=$("#send_id").val();$("#sendmessageproblem").hide();$("#sendmessagesuccess").hide();$.ajax({type:"POST",url:d+a,dataType:"json",data:"email="+b+"&send_id="+c,failure:function(e){$("#sendmessageproblem").show();$("#sendmessageproblem").children("p").remove();$("#sendmessageproblem").append("<p>Email error.</p>");$('button[type="submit"]').removeAttr("disabled")},success:function(e){if(e.success){if(e.code==200){$("#sendform").prepend('<div class="message success hide" id="sendmessagesuccess"></div>');$("#sendmessagesuccess").show();$("#sendmessagesuccess").children("p").remove();$("#sendmessagesuccess").append("<p>"+e.description+"</p>")}$('button[type="submit"]').removeAttr("disabled");setTimeout("hideBlockUI()",3000)}else{if(e.code==-200){window.location=d+"login"}if(e.code==-100){$("#sendmessageproblem").show();$("#sendmessageproblem").children("p").remove();$("#sendmessageproblem").append("<p>"+e.description+"</p>");$('button[type="submit"]').removeAttr("disabled")}else{$("#sendmessageproblem").show();$("#sendmessageproblem").children("p").remove();$("#sendmessageproblem").append("<p>Email error.</p>");$('button[type="submit"]').removeAttr("disabled")}}}})}function loadData(d){var b=$("#datalink"+d).hasClass("clicked");if(!b){$("#datalink"+d).addClass("clicked");$("#loader_small_"+d).removeClass("hide");var c=$("#base_url").val();var a=$("#call_script_data").val();if($("#row"+d).hasClass("active inherit")){$("#row"+d).removeClass("active inherit");$("#view_"+d).removeClass("selected");$("#rowdata"+d).remove();$("#loader_small_"+d).addClass("hide");$("#datalink"+d).removeClass("clicked")}else{$.ajax({type:"POST",url:c+a,dataType:"json",data:"id="+d,failure:function(e){$("#loader_small_"+d).addClass("hide");$("#datalink"+d).removeClass("clicked")},success:function(f){if(f.success){if(f.code==200){$("#row"+d).addClass("active inherit");$("#view_"+d).addClass("selected");var e=$("#row"+d);e.after(f.data)}}$("#loader_small_"+d).addClass("hide");$("#datalink"+d).removeClass("clicked")}})}}}function resetFilters(){$("#search").attr("value","");$("#types option:first").attr("selected","selected");$("#clients option:first").attr("selected","selected");$("#roles option:first").attr("selected","selected")}function resetLimitCounters(){$("#limit_to").attr("value",$("#limit_default_to").val());$("#limit_from").attr("value",$("#limit_default_from").val())}function resetAllLetters(){var b=$("#tools");var a=b.children("ul");a.children("li").removeClass("selected")};